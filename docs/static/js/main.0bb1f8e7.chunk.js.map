{"version":3,"sources":["sets.tsx","App.tsx","index.tsx"],"names":["sets","code","name","startDate","Date","endDate","maxLevel","rewards","require","mythinUpgadeForSet","bonusUpgradeForSet","probabilityDistribution","y","a","N","Array","Math","min","map","_","k","hypergeometricPMF","probabilityDistributionWithSmoothing","avg","handWeights","weights","pow","abs","cntToWeight","probabilities","fill","h1","h2","h3","p","h1w","h2w","h3w","t","combinations","n","r","res","i","presentSet","now","filter","set","reduce","latest","xpToLevel","xp","floor","getTimeLeft","dateInput","isInitial","date","daysLeft","sundaysLeft","getUTCHours","setUTCDate","getUTCDate","setUTCHours","getUTCDay","questsLeft","formatDate","toLocaleDateString","month","day","getXPForDate","winsPerDay","arguments","length","undefined","winsPerWeek","questWins","xpPerDay","xpPerWeek","SliderInput","_ref","value","onChange","label","max","step","_jsxs","style","margin","color","display","children","_jsx","type","event","Number","target","width","FormattedXP","_ref2","formattedXP","toString","padStart","slice","fontSize","sortKeys","getSortKey","item","key","RegExp","test","RewardItem","_ref3","count","subitems","className","from","entries","sort","_ref4","_ref5","b","localeCompare","_ref6","subitem","prev","curr","_Fragment","aggregateRewards","startLevel","endLevel","aggregated","Map","aggregatedSubitems","level","forEach","_ref7","_aggregated$get","get","_subitems$get","list","push","subitemCounts","_ref8","_subitemCounts$get","_ref9","FormattedCount","_ref10","formattedCount","toFixed","PacksCalculator","_ref11","numPacks","setNumPacks","useState","isMythic","setIsMythic","isGoldenPack","setIsGoldenPack","withVault","setWithVault","results","packs","_mythinUpgadeForSet$s","_bonusUpgradeForSet$s","mythicUpgrade","mythicCardUpgrade","bonusUpgrade","commonWCInPack","rareWCInPack","mythicWCInPack","uncommonWheel","rareWheel","mythicWheel","commonsInPack","vaultProgress","uncommonsInPack","vaultUncommonWC","vaultRareWC","vaultMythicWC","u","m","c","totalCommons","totalUncommons","totalRares","totalMythics","totalBonus","fromWheel","fromVault","fromPacks","packsToWildcards","alignItems","padding","cursor","checked","e","marginRight","height","LandDrawCalculator","deckSize","setDeckSize","landCount","setLandCount","drawCount","setDrawCount","targetMin","setTargetMin","targetMax","setTargetMax","handSmoothing","setHandSmoothing","distribution","first7distribution","restDistribution","first7","rest","probabilityDistributionWithSmoothing7","targetProbability","sum","chartData","labels","concat","datasets","data","backgroundColor","generateColor","total","baseColor","brightness","g","borderColor","borderWidth","x","v","round","maxWidth","border","Pie","options","responsive","plugins","legend","position","tooltip","callbacks","context","percentage","parsed","App","_currentXPBySet$set$c","setNow","setSet","getInitialMode","hash","window","location","calculatorMode","setCalculatorMode","nowClipped","isCurrentSet","questCompletion","setQuestCompletion","dailyWins","setDailyWins","weeklyWins","setWeeklyWins","currentXPBySet","setCurrentXPBySet","stored","localStorage","getItem","JSON","parse","_unused","currentXP","setCurrentXP","xpOrUpdater","_prev$set$code","_objectSpread","remQuests","setRemQuests","remDailyWins","setRemDailyWins","remWeeklyWins","setRemWeeklyWins","timeRemainaing","diff","getTime","days","hours","minutes","getDifferenceInTime","totalXP","remainingXP","estimatedXP","weeklyGold","questPercent","goldCummulative","getGoldPerWeek","maxXP","graphDates","intervalHours","dates","currentDate","setHours","getHours","getDatesBetween","useEffect","interval","setInterval","clearInterval","setItem","stringify","handleHashChange","addEventListener","removeEventListener","d","pointRadius","_sets$find","find","s","href","rel","onClick","ceil","Line","reward","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0bb1f8e7.chunk.js","sourcesContent":["\nexport type Rewards = Array<Array<[number, string, string]>>;\nexport interface Set {\n  code: string;\n  name: string;\n  startDate: Date;\n  endDate: Date;\n  maxLevel?: number;\n  rewards?: Rewards;\n}\nexport const sets: Set[] = [\n  {\n    code: \"LCI\",\n    name: \"Lost Caverns of Ixalan\",\n    startDate: new Date(\"2023-11-14T17:00:00Z\"),\n    endDate: new Date(\"2024-02-06T13:00:00Z\"),\n    maxLevel: 90,\n    rewards: require(\"./data/rewardsLCI.json\"),\n  },\n  {\n    code: \"MKM\",\n    name: \"Murders at Karlov Manor\",\n    startDate: new Date(\"2024-02-06T17:00:00Z\"),\n    endDate: new Date(\"2024-04-16T13:00:00Z\"),\n    maxLevel: 70,\n    rewards: require(\"./data/rewardsMKM.json\"),\n  },\n  {\n    code: \"OTJ\",\n    name: \"Outlaws of Thunder Junction\",\n    startDate: new Date(\"2024-04-16T17:00:00Z\"),\n    endDate: new Date(\"2024-07-30T13:00:00Z\"),\n    maxLevel: 110,\n    rewards: require(\"./data/rewardsOTJ.json\"),\n  },\n  {\n    code: \"BLB\",\n    name: \"Bloomburrow\",\n    startDate: new Date(\"2024-07-30T17:00:00Z\"),\n    endDate: new Date(\"2024-09-24T13:00:00Z\"),\n    maxLevel: 60,\n    rewards: require(\"./data/rewardsBLB.json\"),\n  },\n  {\n    code: \"DSK\",\n    name: \"Duskmourn: House of Horror\",\n    startDate: new Date(\"2024-09-24T17:00:00Z\"),\n    endDate: new Date(\"2024-11-12T13:00:00Z\"),\n    maxLevel: 60,\n    rewards: require(\"./data/rewardsDSK.json\"),\n  },\n  {\n    code: \"FDN\",\n    name: \"Foundations\",\n    startDate: new Date(\"2024-11-12T17:00:00Z\"),\n    endDate: new Date(\"2025-02-11T13:00:00Z\"),\n    maxLevel: 90,\n    rewards: require(\"./data/rewardsFDN.json\"),\n  },\n  {\n    code: \"DFT\",\n    name: \"Aetherdrift\",\n    startDate: new Date(\"2025-02-11T17:00:00Z\"),\n    endDate: new Date(\"2025-04-08T13:00:00Z\"),\n    maxLevel: 60,\n    rewards: require(\"./data/rewardsDFT.json\"),\n  },\n  {\n    code: \"TDM\",\n    name: \"Tarkir: Dragonstorm\",\n    startDate: new Date(\"2025-04-08T17:00:00Z\"),\n    endDate: new Date(\"2025-06-10T13:00:00Z\"),\n    maxLevel: 70,\n    rewards: require(\"./data/rewardsTDM.json\"),\n  },\n  {\n    code: \"FIN\",\n    name: \"Final Fantasy\",\n    startDate: new Date(\"2025-06-10T16:00:00Z\"),\n    endDate: new Date(\"2025-07-29T13:00:00Z\"),\n    maxLevel: 50,\n    rewards: require(\"./data/rewardsFIN.json\"),\n  },\n  {\n    code: \"EOE\",\n    name: \"Edge of Eternities\",\n    startDate: new Date(\"2025-07-29T16:00:00Z\"),\n    endDate: new Date(\"2025-09-23T13:00:00Z\"),\n    maxLevel: 60,\n    rewards: require(\"./data/rewardsEOE.json\"),\n  },\n  {\n    code: \"OM1\",\n    name: \"Through the Omenpaths\",\n    startDate: new Date(\"2025-09-23T16:00:00Z\"),\n    endDate: new Date(\"2025-11-18T12:00:00Z\"), // The countdown in emporium suggests 12:00 (related to the DST change?)\n    maxLevel: 60,\n    rewards: require(\"./data/rewardsOM1.json\"),\n  },\n  {\n    code: \"TLA\",\n    name: \"Avatar: The Last Airbender\",\n    startDate: new Date(\"2025-11-18T15:00:00Z\"),\n    endDate: new Date(\"2026-01-20T12:00:00Z\"),\n    maxLevel: 60,\n    rewards: require(\"./data/rewardsTLA.json\"),\n  },\n  {\n    code: \"ECL\",\n    name: \"Lorwyn Eclipsed\",\n    startDate: new Date(\"2026-01-20T15:00:00Z\"),\n    endDate: new Date(\"2026-03-03T12:00:00Z\"),\n    maxLevel: 40,\n    rewards: require(\"./data/rewardsECL.json\"),\n  },\n  {\n    code: \"TMT\",\n    name: \"Teenage Mutant Ninja Turtles\",\n    startDate: new Date(\"2026-03-03T15:00:00Z\"),\n    endDate: new Date(\"2026-04-21T12:00:00Z\"),\n    maxLevel: 50,\n  },\n  {\n    code: \"SOS\",\n    name: \"Secrets of Strixhaven\",\n    startDate: new Date(\"2026-04-21T15:00:00Z\"),\n    endDate: new Date(\"2026-06-23T12:00:00Z\"),\n    maxLevel: 70,\n  },\n  {\n    code: \"OM2\",\n    name: \"Through the Omenpaths 2\", // Guess\n    startDate: new Date(\"2026-06-23T15:00:00Z\"),\n    endDate: new Date(\"2026-08-11T12:00:00Z\"),\n    maxLevel: 50,\n  },\n  {\n    code: \"THT\", // Guess\n    name: \"The Hobbit\",\n    startDate: new Date(\"2026-08-11T15:00:00Z\"),\n    endDate: new Date(\"2026-09-29T12:00:00Z\"),\n    maxLevel: 50,\n  },\n  {\n    code: \"RFR\", // Guess\n    name: \"Reality Fractured\",\n    startDate: new Date(\"2026-09-29T15:00:00Z\"),\n    endDate: new Date(\"2026-11-17T12:00:00Z\"),\n    maxLevel: 50,\n  }\n];\n","import React, { useState, useEffect } from 'react';\nimport { Line, Pie } from 'react-chartjs-2';\nimport { Set, sets, Rewards } from './sets';\nimport './styles/App.css';\n\nconst mythinUpgadeForSet: { [key: string]: number } = {\n  'FIN': 1/8.4,\n  'OM1': 15/121, // ~1/8.1,\n  'LCI': 11/75, //  ~1/6.8,\n};\nconst bonusUpgradeForSet: { [key: string]: number } = {\n  'TLA': 1/25,\n  'OM1': 1/64,\n  'FIN': 1/3,\n  'TDM': 1/60,\n  'DFT': 1/64,\n  'MKM': 1/8,\n  'OTJ': 1,\n  'EOE': 1/55,\n  'ECL': 1/55,\n};\nfunction packsToWildcards(packs: number, isMythic: boolean, isGoldenPack: boolean, withVault: boolean, set: string) {\n  const mythicUpgrade = mythinUpgadeForSet[set] ?? 1/7;\n  const mythicCardUpgrade = isMythic ? 1 : mythicUpgrade;\n  const goldenMythicUpgrade = 1/6; // \"approximately\"\n  const bonusUpgrade = bonusUpgradeForSet[set] ?? 0;\n  const commonWCInPack = 1/3;\n  const uncommonWCInPack = 1/5;\n  const rareWCInPack = 1/30; // * (1 - mythicUpgrade);\n  const mythicWCInPack = 1/30; // * mythicUpgrade;\n\n  const rareInGoldenPack = isGoldenPack ? 5 * (1 - goldenMythicUpgrade) / 10 : 0;\n  const mythicInGoldenPack = isGoldenPack ? (1 + 5 * goldenMythicUpgrade) / 10 : 0;\n\n  const uncommonWheel = 1/6 * (isGoldenPack ? 1.1 : 1);\n  const rareWheel = 1/6 * (1 - 1/5) * (isGoldenPack ? 1.1 : 1);\n  const mythicWheel = 1/6 * 1/5 * (isGoldenPack ? 1.1 : 1);\n\n  const commonsInPack = 5 - commonWCInPack - bonusUpgrade;\n  const uncommonsInPack = 2 - uncommonWCInPack;\n  const raresInPack = (1 - rareWCInPack - mythicWCInPack) * (1 - mythicCardUpgrade);\n  const mythicsInPack = (1 - rareWCInPack - mythicWCInPack) * mythicCardUpgrade;\n  const bonusInPack = bonusUpgrade;\n\n  const vaultProgress = withVault ? commonsInPack * 0.1 + uncommonsInPack * 0.3 : 0;\n  const vaultUncommonWC = vaultProgress / 100 * 3;\n  const vaultRareWC = vaultProgress / 100 * 2;\n  const vaultMythicWC = vaultProgress / 100 * 1;\n  return {\n    u: packs * (uncommonWCInPack + uncommonWheel + vaultUncommonWC),\n    r: packs * (rareWCInPack + rareWheel + vaultRareWC),\n    m: packs * (mythicWCInPack + mythicWheel + vaultMythicWC),\n    c: packs * (commonWCInPack),\n    totalCommons: packs * commonsInPack,\n    totalUncommons: packs * uncommonsInPack,\n    totalRares: packs * (raresInPack + rareInGoldenPack),\n    totalMythics: packs * (mythicsInPack + mythicInGoldenPack),\n    totalBonus: packs * bonusInPack,\n    fromWheel: {\n      u: packs * uncommonWheel,\n      r: packs * rareWheel,\n      m: packs * mythicWheel,\n    },\n    fromVault: {\n      u: packs * vaultUncommonWC,\n      r: packs * vaultRareWC,\n      m: packs * vaultMythicWC,\n    },\n    fromPacks: {\n      u: packs * uncommonWCInPack,\n      r: packs * rareWCInPack,\n      m: packs * mythicWCInPack,\n      c: packs * commonWCInPack,\n    },\n    vaultProgress: packs * vaultProgress,\n  }\n}\n/**\n * Calculates the probability of getting at least x successes in y draws.\n * @param {number} x - Minimum required successes (at least x As).\n * @param {number} y - Total number of draws.\n * @param {number} a - Total number of successes in population (As).\n * @param {number} N - Total population size.\n * @returns {number} The probability (0 to 1).\n */\nfunction probabilityAtLeastX(x: number, y: number, a: number, N: number): number {\n  let totalProbability = 0;\n  // Sum probabilities for k successes from x up to the maximum possible\n  // Max successes is limited by either total draws (y) or total available As (a)\n  const maxSuccesses = Math.min(y, a);\n  for (let k = x; k <= maxSuccesses; k++) {\n    totalProbability += hypergeometricPMF(k, N, a, y);\n  }\n  return totalProbability;\n}\n/**\n * Calculates the probability distribution for getting k successes in y draws.\n * @param {number} y - Total number of draws.\n * @param {number} a - Total number of successes in population (As).\n * @param {number} N - Total population size.\n * @returns {number[]} Array of probabilities where index k represents P(X = k).\n */\nfunction probabilityDistribution(y: number, a: number, N: number): number[] {\n  return [...Array(Math.min(y, a) + 1)].map((_, k) => hypergeometricPMF(k, N, a, y));\n}\nfunction probabilityDistributionWithSmoothing(y: number, a: number, N: number): number[] {\n  const avg = y * a / N;\n  const cntToWeight = (k: number) => 1 / Math.pow(4, Math.pow(Math.abs(k - avg), 2.5));\n  const handWeights = probabilityDistribution(y, a, N);\n  const weights = [...Array(y + 1)].map((_, k) => cntToWeight(k));\n  const probabilities = [...Array(y + 1)].fill(0);\n  for (let h1 = 0; h1 <= y; h1++) {\n    for (let h2 = 0; h2 <= y; h2++) {\n      for (let h3 = 0; h3 <= y; h3++) {\n        const p = handWeights[h1] * handWeights[h2] * handWeights[h3] || 0;\n        const h1w = weights[h1], h2w = weights[h2], h3w = weights[h3];\n        const t = h1w + h2w + h3w;\n        probabilities[h1] += p * h1w / t;\n        probabilities[h2] += p * h2w / t;\n        probabilities[h3] += p * h3w / t;\n      }\n    }\n  }\n  return probabilities;\n}\nfunction probabilityDistributionWithSmoothing7(y: number, a: number, N: number): number[] {\n  const first7distribution = probabilityDistributionWithSmoothing(Math.min(7, y), a, N);\n  const restDistribution = probabilityDistribution(y - Math.min(7, y), a, N);\n  const probabilities = [...Array(y + 1)].fill(0);\n  for (let first7 = 0; first7 <= Math.min(7, y); first7++) {\n    for (let rest = 0; rest <= y - Math.min(7, y); rest++) {\n      probabilities[first7 + rest] += first7distribution[first7] * restDistribution[rest];\n    }\n  }\n  return probabilities;\n}\n\n/**\n * Probability Mass Function (PMF) for exactly k successes.\n * Formula: P(k) = [aCk * bC(y-k)] / NCy\n */\nfunction hypergeometricPMF(k: number, N: number, a: number, y: number): number {\n  if (k < 0 || k > a || (y - k) > (N - a) || (y - k) < 0) return 0;\n  return (combinations(a, k) * combinations(N - a, y - k)) / combinations(N, y);\n}\nfunction combinations(n: number, r: number): number {\n  if (r < 0 || r > n) return 0;\n  if (r === 0 || r === n) return 1;\n  if (r > n / 2) r = n - r; // Symmetry optimization\n  let res = 1;\n  for (let i = 1; i <= r; i++) {\n    res = res * (n - i + 1) / i;\n  }\n  return res;\n}\n\nfunction presentSet(now: Date): Set {\n  return sets.filter(set => set.startDate <= now).reduce((latest, set) => set.startDate > latest.startDate ? set : latest);\n}\n\nfunction xpToLevel(xp: number): number {\n  return Math.floor(xp / 1000) + 1;\n}\n\nfunction getDifferenceInTime(startDate: Date, endDate: Date): { days: number, hours: number, minutes: number } {\n  const diff = endDate.getTime() - startDate.getTime();\n  const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n  const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n  const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n  return { days, hours, minutes };\n}\n\nfunction getDatesBetween(set: Set, intervalHours: number): Date[] {\n  const dates = [];\n  let currentDate = new Date(set.startDate);\n\n  for(;;) {\n    dates.push(new Date(currentDate));\n    if (currentDate > set.endDate) break;\n    currentDate.setHours(currentDate.getHours() + intervalHours);\n  }\n  return dates;\n}\n\nfunction getTimeLeft(dateInput: Date, set: Set) {\n  const isInitial = dateInput <= set.startDate ? 1 : 0;\n  const date = new Date(dateInput);\n  let daysLeft = 0;\n  let sundaysLeft = 0;\n  const targetHour = 9; // 9am UTC is the daily reset\n  if (date.getUTCHours() >= targetHour) {\n    date.setUTCDate(date.getUTCDate() + 1);\n  }\n  date.setUTCHours(targetHour);\n\n  while (date < set.endDate) {\n    daysLeft++;\n    if (date.getUTCDay() === 0) sundaysLeft++;\n    date.setUTCDate(date.getUTCDate() + 1);\n  }\n\n  return {\n    daysLeft: daysLeft + isInitial,\n    sundaysLeft: sundaysLeft + isInitial,\n    questsLeft: daysLeft + isInitial * 3,\n  };\n}\nfunction formatDate(date: Date): string {\n  const options: Intl.DateTimeFormatOptions = { month: 'short', day: '2-digit' };\n  return date.toLocaleDateString('en-US', options);\n}\n\n\nfunction getXPForDate(date: Date, set: Set, winsPerDay: number = 10, winsPerWeek: number = 15, questWins?: number): number {\n  const xpPerDay = Math.min(winsPerDay, 10) * 25;\n  const xpPerWeek = Math.min(winsPerWeek, 15) * 250;\n  const xpPerQuest = 500;\n  const {daysLeft, sundaysLeft, questsLeft} = getTimeLeft(date, set);\n  return xpPerDay * daysLeft + xpPerWeek * sundaysLeft + xpPerQuest * (questWins !== undefined ? Math.min(questsLeft, questWins): questsLeft);\n}\n\nfunction getGoldPerWeek(winsPerDay: number, questPercent: number): { min: number; max: number; avg: number } {\n  const goldRewards = [250, 100, 100, 100, 0, 50, 0, 50, 0, 50, 0, 25, 0, 25, 0];\n  const goldCummulative = goldRewards.slice(0, winsPerDay).reduce((a, b) => a + b, 0);\n  const questGold = (500 * 9 + 750 * 7) / 16;\n  const questGoldMin = 500, questGoldMax = 750;\n  return {\n    min: Math.floor(7 * (goldCummulative + questGoldMin * questPercent)),\n    max: Math.floor(7 * (goldCummulative + questGoldMax * questPercent)),\n    avg: Math.floor(7 * (goldCummulative + questGold * questPercent)),\n  }\n}\n\ninterface SliderInputProps {\n    value: number;\n    onChange: (value: number) => void;\n    label: string;\n    min: number;\n    max: number;\n    step?: number;\n}\n\nconst SliderInput: React.FC<SliderInputProps> = ({ value, onChange, label, min, max, step }) => {\n    const handleSliderChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        onChange(Number(event.target.value));\n    };\n\n    const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        onChange(Number(event.target.value));\n    };\n\n    return (\n        <div style={{ margin: '10px', color: 'white', display: 'flex' }}>\n            <label>{label}</label>\n            <input\n                type=\"number\"\n                value={value}\n                onChange={handleInputChange}\n                min={min}\n                max={max}\n                step={step}\n                style={{ margin: '0 10px', width: '60px' }}\n            />\n            <input\n                type=\"range\"\n                min={min}\n                max={max}\n                step={step}\n                value={value}\n                onChange={handleSliderChange}\n                style={{ width: '200px' }}\n            />\n        </div>\n    );\n};\n\nconst FormattedXP = ({ xp }: { xp: number }) => {\n  const formattedXP = xp.toString().padStart(4, '0');\n\n  return (\n    <span>\n      {formattedXP.slice(0, -3)}\n      <span style={{ fontSize: '0.8em', color: '#aaa' }}>{formattedXP.slice(-3)}</span>\n    </span>\n  );\n};\n\nconst sortKeys: [ RegExp | String, number ][] = [\n  [ 'Gems', 0 ],\n  [ 'Gold', 1 ],\n  [ 'Booster', 2 ],\n  [ /Draft Token/, 3 ],\n  [ /\\bICR\\b/, 4 ],\n  [ /\\bCard$/, 4 ],\n  [ 'Orb', 5 ],\n  [ /\\bCS\\b/, 9 ],\n  [ 'Card Style', 9 ],\n  [ /\\bPet\\b|\\bCompanion\\b/, 6 ],\n  [ /\\bAvatar\\b/, 7 ],\n  [ /\\bSleeve\\b/, 8 ],\n  [ /\\bEmote\\b/, 10 ],\n]\nconst getSortKey = (item: string) => {\n  for (const [key, value] of sortKeys) {\n    if (key instanceof RegExp ? key.test(item) : item === key) return value;\n  }\n  return 99;\n};\n\ninterface RewardItemProps {\n  item: string;\n  count: number;\n  subitems?: Map<string, number>;\n}\nconst RewardItem: React.FC<RewardItemProps> = ({ item, count, subitems }) => (\n  <li key={item} className={'reward_' + getSortKey(item)}>{count} {item}\n    {subitems && <span style={{fontSize:'75%'}}> (\n      {Array.from(subitems.entries())\n        .sort(([a], [b]) => a.localeCompare(b))\n        .map(([subitem, count]) => (\n          count > 1 ? <span>{count}x {subitem}</span> : <span>{subitem}</span>\n        ))\n        .reduce((prev, curr) => <>{prev}, {curr}</>)}\n    )</span>\n    }\n  </li>\n);\n\nconst aggregateRewards = (rewards: Rewards, startLevel: number, endLevel: number) => {\n  const aggregated = new Map<string, number>();\n  const subitems = new Map<string, [string, number][]>();\n  const aggregatedSubitems = new Map<string, Map<string, number>>();\n\n  for (let level = startLevel; level <= endLevel; level++) {\n    const idx = Math.min(level - 1, rewards.length - 1);\n    rewards[idx].forEach(([count, item, subitem]: [number, string, string]) => {\n        aggregated.set(item, (aggregated.get(item) ?? 0) + count);\n        if (subitem) {\n          const list = subitems.get(item) ?? [];\n          list.push([subitem, count]);\n          subitems.set(item, list);\n        }\n    });\n  }\n  subitems.forEach((list, item) => {\n    const subitemCounts = new Map<string, number>();\n    list.forEach(([subitem, count]) => {\n    subitemCounts.set(subitem, (subitemCounts.get(subitem) ?? 0) + count);\n    });\n    aggregatedSubitems.set(item, subitemCounts);\n  });\n\n  return Array.from(aggregated.entries())\n    .map(([item, count]) => ({ item, count, subitems: aggregatedSubitems.get(item) }))\n    .sort((a, b) => getSortKey(a.item) - getSortKey(b.item));\n};\n\nconst FormattedCount = ({ count }: { count: number }) => {\n  const formattedCount = count.toFixed(2);\n  return (\n    <span className=\"formatted-count\">\n      {formattedCount.slice(0, -3)}\n      <span style={{ fontSize: '0.8em', color: '#aaa' }}>{formattedCount.slice(-3)}</span>\n    </span>\n  );\n};\n\nconst PacksCalculator: React.FC<{ set: Set }> = ({ set }) => {\n  const [numPacks, setNumPacks] = useState(100);\n  const [isMythic, setIsMythic] = useState(false);\n  const [isGoldenPack, setIsGoldenPack] = useState(false);\n  const [withVault, setWithVault] = useState(true);\n\n  const results = packsToWildcards(numPacks, isMythic, isGoldenPack, withVault, set.code);\n\n  return (\n    <div className=\"packs-calculator\">\n      <div className=\"info\">\n        <h3>For set: {set.name}</h3>\n      </div>\n      <div className=\"container\" style={{ alignItems: 'flex-start', padding: '10px' }}>\n        <SliderInput\n          label=\"Number of Packs\"\n          value={numPacks}\n          onChange={setNumPacks}\n          min={1}\n          max={500}\n        />\n        <label style={{ margin: '10px', color: 'white', display: 'flex', alignItems: 'center', cursor: 'pointer' }}>\n          <input\n            type=\"checkbox\"\n            checked={isMythic}\n            onChange={(e) => setIsMythic(e.target.checked)}\n            style={{ marginRight: '10px', width: '20px', height: '20px' }}\n          />\n          Mythic packs\n        </label>\n        <label style={{ margin: '10px', color: 'white', display: 'flex', alignItems: 'center', cursor: 'pointer' }}>\n          <input\n            type=\"checkbox\"\n            checked={isGoldenPack}\n            onChange={(e) => setIsGoldenPack(e.target.checked)}\n            style={{ marginRight: '10px', width: '20px', height: '20px' }}\n          />\n          Include Golden Packs\n        </label>\n        <label style={{ margin: '10px', color: 'white', display: 'flex', alignItems: 'center', cursor: 'pointer' }}>\n          <input\n            type=\"checkbox\"\n            checked={withVault}\n            onChange={(e) => setWithVault(e.target.checked)}\n            style={{ marginRight: '10px', width: '20px', height: '20px' }}\n          />\n          Include Vault progress (assume C/UC completion)\n        </label>\n      </div>\n      <div className=\"rewards\">\n        <div>\n          <h2>Wildcards Expected</h2>\n          <ul>\n            <li style={{ fontSize: '120%' }}><FormattedCount count={results.m} /> Mythic WC</li>\n            <li style={{ fontSize: '120%' }}><FormattedCount count={results.r} /> Rare WC</li>\n            <li style={{ fontSize: '120%' }}><FormattedCount count={results.u} /> Uncommon WC</li>\n            <li style={{ fontSize: '120%' }}><FormattedCount count={results.c} /> Common WC</li>\n          </ul>\n          <h3>From Packs</h3>\n          <ul style={{ fontSize: '90%', color: '#aaa' }}>\n            <li><FormattedCount count={results.fromPacks.m} /> Mythic WC</li>\n            <li><FormattedCount count={results.fromPacks.r} /> Rare WC</li>\n            <li><FormattedCount count={results.fromPacks.u} /> Uncommon WC</li>\n            <li><FormattedCount count={results.fromPacks.c} /> Common WC</li>\n          </ul>\n          <h3>From Wildcard Track</h3>\n          <ul style={{ fontSize: '90%', color: '#aaa' }}>\n            <li><FormattedCount count={results.fromWheel.m} /> Mythic WC</li>\n            <li><FormattedCount count={results.fromWheel.r} /> Rare WC</li>\n            <li><FormattedCount count={results.fromWheel.u} /> Uncommon WC</li>\n          </ul>\n          {withVault && (\n            <>\n              <h3>From Vault ({results.vaultProgress.toFixed(1)}%)</h3>\n              <ul style={{ fontSize: '90%', color: '#aaa' }}>\n                <li><FormattedCount count={results.fromVault.m} /> Mythic WC</li>\n                <li><FormattedCount count={results.fromVault.r} /> Rare WC</li>\n                <li><FormattedCount count={results.fromVault.u} /> Uncommon WC</li>\n              </ul>\n            </>\n          )}\n        </div>\n        <div>\n          <h2>Cards Expected</h2>\n          <ul>\n            <li style={{ fontSize: '120%' }}><FormattedCount count={results.totalMythics} /> Mythic</li>\n            <li style={{ fontSize: '120%' }}><FormattedCount count={results.totalRares} /> Rare</li>\n            <li style={{ fontSize: '120%' }}><FormattedCount count={results.totalUncommons} /> Uncommon</li>\n            <li style={{ fontSize: '120%' }}><FormattedCount count={results.totalCommons} /> Common</li>\n            {results.totalBonus > 0 && (\n              <li style={{ fontSize: '110%' }}><FormattedCount count={results.totalBonus} /> Bonus sheet</li>\n            )}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst LandDrawCalculator: React.FC = () => {\n  const [deckSize, setDeckSize] = useState(60);\n  const [landCount, setLandCount] = useState(24);\n  const [drawCount, setDrawCount] = useState(7);\n  const [targetMin, setTargetMin] = useState(2);\n  const [targetMax, setTargetMax] = useState(4);\n  const [handSmoothing, setHandSmoothing] = useState(false);\n\n  const distribution = handSmoothing\n    ? probabilityDistributionWithSmoothing7(drawCount, landCount, deckSize)\n    : probabilityDistribution(drawCount, landCount, deckSize);\n\n  // Calculate probability for target range\n  const targetProbability = distribution\n    .slice(Math.max(0, targetMin), Math.min(distribution.length, targetMax + 1))\n    .reduce((sum, p) => sum + p, 0);\n\n  // Generate gradient colors based on target range\n  const generateColor = (k: number, total: number) => {\n    const isInTarget = k >= targetMin && k <= targetMax;\n    const baseColor = isInTarget ? [0, 255, 0] : [255, 0, 0]; // Green or Red\n\n    // Calculate brightness from 20% to 80%\n    const brightness = 0.2 + (k / Math.max(1, total - 1)) * 0.6;\n    const [r, g, b] = baseColor.map(c => Math.floor(c * brightness));\n\n    return `rgba(${r}, ${g}, ${b}, 1)`;\n  };\n\n  const chartData = {\n    labels: distribution.map((_, k) => `${k} lands`),\n    datasets: [\n      {\n        label: 'Probability',\n        data: distribution,\n        backgroundColor: distribution.map((_, k) => generateColor(k, distribution.length)),\n        borderColor: 'rgba(255, 255, 255, 0.8)',\n        borderWidth: 2,\n      },\n    ],\n  };\n\n  const chartOptions: any = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'right',\n        labels: {\n          color: 'white',\n        },\n      },\n      tooltip: {\n        callbacks: {\n          label: function(context: any) {\n            const label = context.label || '';\n            const value = context.parsed;\n            const percentage = (value * 100).toFixed(2);\n            return `${label}: ${percentage}%`;\n          },\n        },\n      },\n    },\n  };\n\n  return (\n    <div className=\"land-draw-calculator\">\n      <div className=\"info\">\n        <h3>Calculate probability of drawing lands</h3>\n      </div>\n      <div className=\"container\" style={{ alignItems: 'flex-start', padding: '10px' }}>\n        <SliderInput\n          label=\"Deck Size\"\n          value={deckSize}\n          onChange={(x) => {setDeckSize(x); setLandCount(Math.min(landCount, x)); setDrawCount(Math.min(drawCount, x)); setTargetMax(Math.min(targetMax, x)); setTargetMin(Math.min(targetMin, x)); }}\n          min={1}\n          max={99}\n        />\n        <SliderInput\n          label=\"Land Count\"\n          value={landCount}\n          onChange={(v) => setLandCount(Math.min(v, deckSize))}\n          min={0}\n          max={deckSize}\n        />\n        <SliderInput\n          label=\"Cards Drawn\"\n          value={drawCount}\n          onChange={(v) => { setDrawCount(Math.min(v, deckSize)); setTargetMax(Math.min(targetMax, v)); setTargetMin(Math.min(targetMin, v)); } }\n          min={1}\n          max={deckSize}\n        />\n        <label style={{ margin: '10px', color: 'white', display: 'flex', alignItems: 'center', cursor: 'pointer' }}>\n          <input\n            type=\"checkbox\"\n            checked={handSmoothing}\n            onChange={(e) => setHandSmoothing(e.target.checked)}\n            style={{ marginRight: '10px', width: '20px', height: '20px' }}\n          />\n          Hand smoothing (Bo1)\n        </label>\n      </div>\n      <div className=\"container\" style={{ alignItems: 'flex-start', padding: '10px' }}>\n        <SliderInput\n          label=\"Target number of lands: Min\"\n          value={targetMin}\n          onChange={(v) => { setTargetMin(v); setTargetMax(Math.max(v, targetMax)); }}\n          min={0}\n          max={drawCount}\n        />\n        <SliderInput\n          label=\"Max\"\n          value={targetMax}\n          onChange={(v) => { setTargetMax(v); setTargetMin(Math.min(v, targetMin)); }}\n          min={0}\n          max={drawCount}\n        />\n      </div>\n      <div className=\"info\">\n        <h2>\n          Probability of {\n            targetMin === targetMax\n              ? `exactly ${targetMin}`\n              : targetMin === 0 && targetMax < drawCount\n              ? `at most ${targetMax}`\n              : targetMax === drawCount && targetMin > 0\n              ? `at least ${targetMin}`\n              : `${targetMin}-${targetMax}`\n          } lands:{' '}\n          <span className=\"large\" style={{ color: '#58a6ff' }}>\n            {targetProbability > 0 && targetProbability < 0.0001 ? '<0.01%' : `${(targetProbability * 100).toFixed(2)}%`}\n          </span>\n            {targetProbability > 0 && targetProbability < 0.0005 && ` (1 in ${Math.round(1/targetProbability)})`}\n        </h2>\n      </div>\n      <div className=\"chart\" style={{ maxWidth: '800px', margin: '20px auto' }}>\n        <div style={{ border: '1px solid white', padding: '20px' }}>\n          <Pie data={chartData} options={chartOptions} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst App = () => {\n  const [now, setNow] = useState(new Date());\n  const [set, setSet] = useState(presentSet(now));\n\n  // Initialize calculator mode from URL\n  const getInitialMode = (): 'mastery' | 'packs' | 'land' => {\n    const hash = window.location.hash;\n    if (hash === '#packs') return 'packs';\n    if (hash === '#land') return 'land';\n    return 'mastery';\n  };\n\n  const [calculatorMode, setCalculatorMode] = useState<'mastery' | 'packs' | 'land'>(getInitialMode());\n  const nowClipped = now < set.startDate ? set.startDate : now;\n  const isCurrentSet = set.code === presentSet(now).code;\n  const {questsLeft} = getTimeLeft(nowClipped, set);\n  const [questCompletion, setQuestCompletion] = useState<number | undefined>(undefined);\n  const [dailyWins, setDailyWins] = useState(4);  \n  const [weeklyWins, setWeeklyWins] = useState(15);\n\n  // Initialize from localStorage\n  const [currentXPBySet, setCurrentXPBySet] = useState<{ [key: string]: number }>(() => {\n    try {\n      const stored = localStorage.getItem('currentXPBySet');\n      return stored ? JSON.parse(stored) : {};\n    } catch {\n      return {};\n    }\n  });\n\n  const currentXP = currentXPBySet[set.code] ?? 0;\n  const setCurrentXP = (xpOrUpdater: number | ((prev: number) => number)) => {\n    setCurrentXPBySet(prev => ({\n      ...prev,\n      [set.code]: typeof xpOrUpdater === 'function' ? xpOrUpdater(prev[set.code] ?? 0) : xpOrUpdater\n    }));\n  };\n  const [remQuests, setRemQuests] = useState(0);\n  const [remDailyWins, setRemDailyWins] = useState(0);\n  const [remWeeklyWins, setRemWeeklyWins] = useState(0);\n  const timeRemainaing = getDifferenceInTime(nowClipped, set.endDate);\n  const totalXP = getXPForDate(set.startDate, set);\n  const remainingXP = getXPForDate(nowClipped, set);\n  const estimatedXP = getXPForDate(nowClipped, set, dailyWins, weeklyWins, questCompletion);\n  const weeklyGold = getGoldPerWeek(dailyWins, questsLeft ? ((questCompletion ?? questsLeft) / questsLeft) : 1);\n  const maxXP = estimatedXP + currentXP + (isCurrentSet ? remQuests * 500 + remDailyWins * 25 + remWeeklyWins * 250 : 0);\n  const graphDates = getDatesBetween(set, 24);\n  const maxLevel = set.maxLevel;\n\n  useEffect(() => {\n    const interval = setInterval(() => setNow(new Date()), 60000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Save currentXPBySet to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('currentXPBySet', JSON.stringify(currentXPBySet));\n  }, [currentXPBySet]);\n\n  // Update URL when calculator mode changes\n  useEffect(() => {\n    const hash = `#${calculatorMode}`;\n    if (window.location.hash !== hash) window.location.hash = hash;\n  }, [calculatorMode]);\n\n  useEffect(() => {\n    const handleHashChange = () => { setCalculatorMode(getInitialMode()); };\n    window.addEventListener('hashchange', handleHashChange);\n    return () => window.removeEventListener('hashchange', handleHashChange);\n  }, []);\n\n  const chartData = {\n    labels: Array.from(graphDates, formatDate),\n    datasets: [\n      {\n        label: 'Total XP',\n        data: Array.from(graphDates, d => totalXP - getXPForDate(d, set)),\n        borderColor: 'white',\n        backgroundColor: 'rgba(255, 255, 255, 0.6)',\n        fill: false,\n      },\n      {\n        label: 'Projected XP',\n        data: Array.from(graphDates, d => d < now ? undefined : estimatedXP - getXPForDate(d, set, dailyWins, weeklyWins, questCompletion) + maxXP - estimatedXP),\n        borderColor: 'yellow',\n        backgroundColor: 'rgba(255, 255, 0, 0.5)',\n        fill: false,\n      },\n      ...(maxLevel ? [{\n        label: 'Max Level XP',\n        data: Array.from(graphDates, d => (maxLevel-1)*1000),\n        borderColor: 'green',\n        backgroundColor: 'rgba(0, 255, 0, 0.2)',\n        fill: false,\n        pointRadius: 0,\n      }] : []),\n    ],\n  };\n\n\n  return (\n    <div className=\"app\">\n      <div className=\"header\">\n        <select value={set.code} onChange={e => setSet(sets.find(s => s.code === e.target.value) ?? set)}>\n          {sets.map(s => (\n            <option key={s.code} value={s.code}>\n              {s.name}\n            </option>\n          ))}\n        </select>\n        <a\n          href=\"https://github.com/mtga-mastery-calculator/mtga-mastery-calculator.github.io/issues/new\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"github-link\"\n        >\n          Report issues & suggestions\n        </a>\n      </div>\n      <h1>MTGA Calculator</h1>\n      <div className=\"calculator-switcher\">\n        <button\n          className={calculatorMode === 'mastery' ? 'active' : ''}\n          onClick={() => setCalculatorMode('mastery')}\n        >\n          Mastery Progress\n        </button>\n        <button\n          className={calculatorMode === 'packs' ? 'active' : ''}\n          onClick={() => setCalculatorMode('packs')}\n        >\n          Packs to Wildcards\n        </button>\n        <button\n          className={calculatorMode === 'land' ? 'active' : ''}\n          onClick={() => setCalculatorMode('land')}\n        >\n          Land Draw\n        </button>\n      </div>\n      {calculatorMode === 'packs' ? (\n        <PacksCalculator set={set} />\n      ) : calculatorMode === 'land' ? (\n        <LandDrawCalculator />\n      ) : (\n        <>\n      <div className=\"info\">\n        <h3><span className='large'>{set.name}: {formatDate(set.startDate)} - {formatDate(set.endDate)}</span></h3>\n        <h3>Time Remaining: {now > set.endDate ? `Expired (lasted ${Math.ceil((set.endDate.getTime() - set.startDate.getTime()) / (1000 * 60 * 60 * 24))} days)` : `${timeRemainaing.days}d ${timeRemainaing.hours}h ${timeRemainaing.minutes}m`}</h3>\n        <h2>Remaining XP: <span className=\"large\"><FormattedXP xp={remainingXP}/></span>/<FormattedXP xp={totalXP}/></h2>\n      </div>\n      <div className=\"container\">\n        <SliderInput\n          label=\"Expected quest completion\"\n          value={Math.min(questCompletion ?? questsLeft, questsLeft)}\n          onChange={v => setQuestCompletion(v)}\n          min={0}\n          max={questsLeft}\n        />\n        <SliderInput\n          label=\"Expected daily wins\"\n          value={dailyWins}\n          onChange={v => {\n            setDailyWins(v);\n            setWeeklyWins(Math.max(weeklyWins, v));\n          }}\n          min={0}\n          max={15}\n        />\n        <SliderInput\n          label=\"Expected weekly wins\"\n          value={weeklyWins}\n          onChange={v => setWeeklyWins(v)}\n          min={0}\n          max={15}\n        />\n      </div>\n      <div className=\"info\">\n        <h2>Projcted XP to earn: <span className=\"large\"><FormattedXP xp={estimatedXP}/></span></h2>\n        <h3>Avg weekly gold: <span className=\"large\"><FormattedXP xp={weeklyGold.avg}/></span> (<FormattedXP xp={weeklyGold.min}/> - <FormattedXP xp={weeklyGold.max}/>)</h3>\n      </div>\n      <div className=\"chart\">\n        <div style={{ border: '1px solid white', padding: '20px' }}>\n            <Line data={chartData} />\n        </div>\n      </div>\n      <div className=\"container\">\n      <SliderInput\n        label=\"Current Level\"\n        value={xpToLevel(currentXP)}\n        onChange={v => setCurrentXP(level => level % 1000 + (v - 1) * 1000)}\n        min={1}\n        max={100}\n      />\n      <SliderInput\n        label=\"Current XP\"\n        value={currentXP%1000}\n        onChange={v => setCurrentXP(level => level - level % 1000 + v)}\n        min={0}\n        max={975}\n        step={25}\n      />\n      </div>\n      {isCurrentSet && <div className='container'>\n      <SliderInput\n        label=\"Incomplete Quests\"\n        value={remQuests}\n        onChange={v => setRemQuests(v)}\n        min={0}\n        max={3}\n      />\n      <SliderInput\n        label=\"Incomplete Daily Wins\"\n        value={remDailyWins}\n        onChange={v => setRemDailyWins(v)}\n        min={0}\n        max={10}\n      />\n      <SliderInput\n        label=\"Incomplete Weekly Wins\"\n        value={remWeeklyWins}\n        onChange={v => setRemWeeklyWins(v)}\n        min={0}\n        max={15}\n      />\n      </div>}\n      <div className=\"info\">\n        <h2>Target level: <span className=\"large\">{xpToLevel(maxXP)}</span>{maxLevel && <span>/{maxLevel}</span>}</h2>\n      </div>\n      {set.rewards &&\n      <div className=\"rewards\">\n        <div>\n          <h2>Current rewards</h2>\n          <ul>\n            {aggregateRewards(set.rewards, xpToLevel(0), xpToLevel(currentXP)).map(reward => <RewardItem {...reward} />)}\n          </ul>\n        </div>\n        <div>\n          <h2>Expected rewards</h2>\n          <ul>\n            {aggregateRewards(set.rewards, xpToLevel(currentXP) + 1, xpToLevel(maxXP)).map(reward => <RewardItem {...reward} />)}\n          </ul>\n        </div>\n        <div>\n          <h2>Missed rewards</h2>\n          <ul>\n            {aggregateRewards(set.rewards, xpToLevel(maxXP) + 1, xpToLevel(totalXP)).map(reward => <RewardItem {...reward} />)}\n          </ul>\n        </div>\n      </div>\n      }\n      </>\n      )}\n    </div>\n  );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/App.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}